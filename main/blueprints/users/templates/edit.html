{% extends "_layout.html" %}
{% block title %}
  Setting
{% endblock %}
{% block content %}

<h2>{{user.username}}'s Account Setting</h2>
    <form action="{{url_for('users.update',id=user.id)}}" method="POST"> 
        {% for error in errors if errors|length > 0 %}
        <ul class="flashes alert alert-danger" role="alert" style="list-style: none">  
            <li>{{error}}</li>
        </ul>
        {% endfor %}
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" / >
        <div class="form-group">
            <label for="name">Username:</label>
            <input type='text' required name='username' value="{{user.username}}" class="form-control" / >
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type='email' readonly name='email' value="{{user.email}}" class="form-control" / >
            <small class="text-muted">* Email can not be edited.</small>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type='password' required name='password' class="form-control" / >
        </div>
        <button type="submit" class="btn btn-outline-primary mt-2">Update</button>
    </form>
<section class="mt-3">
    <h3>Preference's field</h3>
    <!-- show all preference that not in list -->
    {% if not_preferences %}
    {% for not_preference in not_preferences %}
    <form class="d-inline" action="{{url_for('preferences.add',id=not_preference.id)}}" method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" / > 
        <input type="submit" class="btn btn-outline-primary" value="{{not_preference.categories}}"/>
    </form>       
    {% endfor %}
    {% endif %}
    <!-- show all preference that already in list -->
    {% if preferences %}
    {% for preference in preferences %}
    <form class="d-inline" action="{{url_for('preferences.remove',id=preference.id)}}" method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" / > 
        <input type="submit" class="btn btn-outline-danger" value="{{preference.categories}}"/>
    </form>
    {% endfor %}
    {% endif %}
</section>
{% endblock %}